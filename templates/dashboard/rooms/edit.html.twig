{% extends 'base.html.twig' %} {% block title %}Edit Room{% endblock %} {% block body %}
<div class="container mx-auto px-4 mt-8 space-y-6">
	<h1 class="text-5xl font-bold mb-6">Edit Room</h1>
	<form method="POST" class="bg-white rounded-lg shadow-md p-6 space-y-4">
		<div>
			<label for="numeroChambre" class="block text-base font-medium text-gray-700 mb-2">Room Number</label>
			<input
				type="text"
				id="numeroChambre"
				name="numeroChambre"
				value="{{ room.numeroChambre }}"
				class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>
		<div>
			<label for="typeEnu" class="block text-base font-medium text-gray-700 mb-2">Room Type</label>
			<select
				id="typeEnu"
				name="typeEnu"
				class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
			>
				<option value="simple" {% if room.typeEnu="" ="simple" %}selected{% endif %}>Simple</option>
				<option value="double" {% if room.typeEnu="" ="double" %}selected{% endif %}>Double</option>
				<option value="suite" {% if room.typeEnu="" ="suite" %}selected{% endif %}>Suite</option>
			</select>
		</div>
		<div>
			<label for="prixParNuit" class="block text-base font-medium text-gray-700 mb-2">Price per Night</label>
			<input
				type="number"
				step="0.01"
				id="prixParNuit"
				name="prixParNuit"
				value="{{ room.prixParNuit }}"
				class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
			/>
		</div>
		<div>
			<label for="disponible" class="block text-base font-medium text-gray-700 mb-2">Available</label>
			<select
				id="disponible"
				name="disponible"
				class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
			>
				<option value="1" {% if room.disponible="" ="1" %}selected{% endif %}>Yes</option>
				<option value="0" {% if room.disponible="" ="0" %}selected{% endif %}>No</option>
			</select>
		</div>
		<div id="error-messages" class="mt-4"></div>
		<div class="flex justify-between">
			<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow">
				Save
			</button>
			<a
				href="{{ path('dashboard_rooms', {id: room.hotel.getHotelId()}) }}"
				class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg"
			>
				Cancel
			</a>
		</div>
	</form>
</div>
<script>
	document.addEventListener("DOMContentLoaded", () => {
		const form = document.querySelector("form");
		const errorMessagesContainer = document.getElementById("error-messages");

		form.addEventListener("submit", (event) => {
			errorMessagesContainer.innerHTML = "";

			const numeroChambre = document.getElementById("numeroChambre").value.trim();
			const prixParNuit = document.getElementById("prixParNuit").value.trim();

			let isValid = true;
			let errorMessages = [];

			if (!numeroChambre) {
				isValid = false;
				errorMessages.push("Room number cannot be empty.");
			}

			if (!prixParNuit || isNaN(prixParNuit) || parseFloat(prixParNuit) <= 0) {
				isValid = false;
				errorMessages.push("Price per night must be a positive number.");
			}

			if (!isValid) {
				event.preventDefault();
				errorMessages.forEach((message) => {
					const errorElement = document.createElement("p");
					errorElement.textContent = message;
					errorElement.classList.add("text-sm", "text-red-600");
					errorMessagesContainer.appendChild(errorElement);
				});
			}
		});
	});
</script>
{% endblock %}
