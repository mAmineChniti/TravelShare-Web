{% extends 'base.html.twig' %} {% block title %}Manage Promos{% endblock %} {% block body %}
<div class="container mx-auto px-4 mt-8 space-y-6">
	<h1 class="text-5xl font-bold mb-6">Manage Promos</h1>

	<div class="flex justify-end">
		<a
			href="{{ path('app_promo_add') }}"
			class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow"
		>
			Add New Promo
		</a>
	</div>

	<div id="error-messages" class="mt-4">
		{% if errors is defined and errors|length > 0 %} {% for error in errors %}
		<p class="text-sm text-red-600">{{ error }}</p>
		{% endfor %} {% endif %}
	</div>

	<div id="success-messages" class="mt-4">
		{% for message in app.flashes('success') %}
		<p class="text-sm text-green-600">{{ message }}</p>
		{% endfor %}
	</div>

	<div class="bg-white rounded-lg shadow-md p-6">
		<table class="w-full border-collapse border border-gray-300">
			<thead class="bg-gray-100">
				<tr>
					<th class="border border-gray-300 px-4 py-2">Code Promo</th>
					<th class="border border-gray-300 px-4 py-2">Expiration Date</th>
					<th class="border border-gray-300 px-4 py-2">Discount (%)</th>
					<th class="border border-gray-300 px-4 py-2">Max People</th>
					<th class="border border-gray-300 px-4 py-2">Actions</th>
				</tr>
			</thead>
			<tbody>
				{% if promos is not empty %} {% for promo in promos %}
				<tr class="hover:bg-gray-50">
					<td class="border border-gray-300 px-4 py-2">{{ promo.codepromo }}</td>
					<td class="border border-gray-300 px-4 py-2">{{ promo.dateexpiration|date('d-m-Y') }}</td>
					<td class="border border-gray-300 px-4 py-2">{{ promo.pourcentagepromo }}</td>
					<td class="border border-gray-300 px-4 py-2">{{ promo.nombremaxpersonne }}</td>
					<td class="border border-gray-300 px-4 py-2 space-x-2">
						<a
							href="{{ path('app_promo_edit', {id: promo.promoid}) }}"
							class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-1 px-3 rounded-lg"
						>
							Edit
						</a>
						<form
							action="{{ path('app_promo_delete', {id: promo.promoid}) }}"
							method="post"
							class="inline"
							onsubmit="return confirm('Are you sure you want to delete this promo?');"
						>
							<button type="submit" class="bg-red-600 hover:bg-red-700 text-white font-medium py-1 px-3 rounded-lg">
								Delete
							</button>
						</form>
					</td>
				</tr>
				{% endfor %} {% else %}
				<tr>
					<td colspan="5" class="text-center text-gray-700 py-4">
						No promos found. Click "Add New Promo" to create one.
					</td>
				</tr>
				{% endif %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
