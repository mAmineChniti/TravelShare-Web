{% extends 'base.html.twig' %} {% block title %}Create an Account - TravelShare{% endblock %} {% block css %}
<style>
	.auth-wrapper {
		min-height: 85vh;
		display: flex;
		align-items: center;
		justify-content: center;
		padding: 2rem 1rem;
	}

	.auth-card {
		border: none;
		transition: all 0.3s;
		max-width: 940px;
	}

	.form-floating > label {
		left: 0.75rem;
	}

	.auth-sidebar {
		display: flex;
		align-items: center;
		justify-content: center;
		flex-direction: column;
		min-height: 200px;
		border-radius: 0.375rem 0 0 0.375rem;
		padding: 2rem;
		background-color: rgba(var(--bs-primary-rgb), 0.1);
	}

	.text-error {
		color: var(--bs-danger);
		font-size: 0.875rem;
		margin-top: 0.25rem;
	}

	@media (max-width: 767.98px) {
		.auth-sidebar {
			border-radius: 0.375rem 0.375rem 0 0;
			min-height: 150px;
		}
	}
</style>
{% endblock %} {% block body %}
<div class="auth-wrapper">
	<div class="container">
		<div class="row justify-content-center">
			<div class="col-md-10">
				<div class="card auth-card shadow">
					<div class="row g-0">
						<!-- Left Side -->
						<div class="col-md-4 d-none d-md-block">
							<div class="auth-sidebar h-100">
								<div class="text-center p-3">
									<h3 class="fs-4 fw-bold mb-3">Welcome to TravelShare</h3>
									<p class="mb-4">Discover new places and share your travel experiences</p>
									<a href="{{ path('app_login') }}" class="btn btn-outline-primary">
										<i class="fas fa-sign-in-alt me-2"></i>Already have an account?
									</a>
								</div>
							</div>
						</div>

						<!-- Form Side -->
						<div class="col-md-8">
							<div class="card-body p-4 p-md-5">
								<div class="d-flex justify-content-between align-items-center mb-4">
									<h2 class="card-title fs-3 fw-bold m-0"><i class="fas fa-user-plus me-2"></i>Create your account</h2>
									<div class="d-block d-md-none">
										<a href="{{ path('app_login') }}" class="btn btn-sm btn-outline-primary">
											<i class="fas fa-sign-in-alt me-1"></i>Sign In
										</a>
									</div>
								</div>

								{% for flash_error in app.flashes('verify_email_error') %}
								<div class="alert alert-danger" role="alert">{{ flash_error }}</div>
								{% endfor %} {% for label, messages in app.flashes %} {% for message in messages %}
								<div class="alert alert-{{ label }}" role="alert">{{ message }}</div>
								{% endfor %} {% endfor %} {{ form_start(form, {'action': path('app_register'), 'attr': {'id':
								'registerForm', 'class': 'needs-validation', 'novalidate': 'novalidate'}}) }}
								<div class="row g-3">
									<!-- First Name -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.name, { 'attr': { 'class': 'form-control', 'placeholder': 'First Name', 'id':
											'firstName' } }) }}
											<label for="firstName">First Name</label>
										</div>
										<div class="text-error">{{ form_errors(form.name) }}</div>
									</div>

									<!-- Last Name -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.last_name, { 'attr': { 'class': 'form-control', 'placeholder': 'Last Name',
											'id': 'lastName' } }) }}
											<label for="lastName">Last Name</label>
										</div>
										<div class="text-error">{{ form_errors(form.last_name) }}</div>
									</div>

									<!-- Email -->
									<div class="col-12">
										<div class="form-floating">
											{{ form_widget(form.email, { 'attr': { 'class': 'form-control', 'placeholder': 'Email Address',
											'id': 'email' } }) }}
											<label for="email"> <i class="fas fa-envelope me-1"></i>Email Address </label>
										</div>
										<div class="text-error">{{ form_errors(form.email) }}</div>
									</div>

									<!-- Password -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.password.first, { 'attr': { 'class': 'form-control', 'placeholder':
											'Password', 'id': 'password' } }) }}
											<label for="password"> <i class="fas fa-lock me-1"></i>Password </label>
										</div>
										<div class="text-error">{{ form_errors(form.password.first) }}</div>
										<div class="form-text text-muted small">
											Password must contain at least 8 characters with 1 uppercase letter, 1 lowercase letter, 1 number
											and 1 special character
										</div>
									</div>

									<!-- Confirm Password -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.password.second, { 'attr': { 'class': 'form-control', 'placeholder': 'Confirm
											Password', 'id': 'confirmPassword' } }) }}
											<label for="confirmPassword"> <i class="fas fa-lock me-1"></i>Confirm Password </label>
										</div>
										<div class="text-error">{{ form_errors(form.password.second) }}</div>
									</div>

									<!-- Phone -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.phone_num, { 'attr': { 'class': 'form-control', 'placeholder': 'Phone Number',
											'id': 'phone' } }) }}
											<label for="phone"> <i class="fas fa-phone-alt me-1"></i>Phone Number </label>
										</div>
										<div class="text-error">{{ form_errors(form.phone_num) }}</div>
									</div>

									<!-- Country -->
									<div class="col-md-6">
										<div class="form-floating">
											{{ form_widget(form.address, { 'attr': { 'class': 'form-select', 'id': 'address', 'placeholder':
											'Select your country' } }) }}
											<label for="address"> <i class="fas fa-map-marker-alt me-1"></i>Country </label>
										</div>
										<div class="text-error">{{ form_errors(form.address) }}</div>
									</div>
								</div>

								<div class="d-grid">
									<button type="submit" class="btn btn-primary btn-lg">
										<i class="fas fa-user-plus me-2"></i>Create Account
									</button>
								</div>

								<div class="text-center mt-3">
									<p class="mb-0">
										Already have an account?
										<a href="{{ path('app_login') }}" class="text-decoration-underline">Sign in</a>
									</p>
								</div>
								{{ form_end(form) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script>
	document.addEventListener("DOMContentLoaded", function () {
		const form = document.getElementById("form");
		if (!form) return;

		const passwordField = document.getElementById("password");
		const confirmPasswordField = document.getElementById("confirmPassword");

		// Special check for password matching
		if (passwordField && confirmPasswordField) {
			confirmPasswordField.addEventListener("input", function () {
				if (passwordField.value !== confirmPasswordField.value) {
					confirmPasswordField.setCustomValidity("Passwords must match");
				} else {
					confirmPasswordField.setCustomValidity("");
				}
			});

			passwordField.addEventListener("input", function () {
				if (confirmPasswordField.value !== "" && passwordField.value !== confirmPasswordField.value) {
					confirmPasswordField.setCustomValidity("Passwords must match");
				} else {
					confirmPasswordField.setCustomValidity("");
				}
			});
		}

		// Bootstrap 5 validation styles
		form.addEventListener("submit", function (event) {
			if (!this.checkValidity()) {
				event.preventDefault();
				event.stopPropagation();
			}
			form.classList.add("was-validated");
		});
	});
</script>
{% endblock %}
