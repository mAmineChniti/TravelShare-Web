<div id="post-{{ post.postId }}" class="mb-10 bg-white shadow rounded-lg p-6">
    <div class="mb-4">
        <span class="font-semibold text-gray-800 text-lg">{{ post.name ~ ' ' ~ post.lastName }}</span>
        <twig:PostText 
            postId="{{ post.postId }}"
            textContent="{{ post.textContent }}"
        />
        <form
            hx-post="{{ path('app_forum_edit', {'id': post.postId}) }}"
            hx-target="#postText-{{ post.postId }}"
            hx-swap="outerHTML"
            id="editPostForm-{{ post.postId }}"
            style="display: none"
            class="mt-2"
        >
            <textarea
                name="editTextarea-{{ post.postId }}"
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
            >{{ post.textContent }}</textarea>
            <div class="flex justify-end mt-2">
                <button
                    type="submit"
                    class="p-2 w-10 h-10 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition-all cursor-pointer flex items-center justify-center"
                    title="Save changes"
                >
                    <i class="fa fa-check"></i>
                </button>
            </div>
        </form>
        
        <div class="flex justify-end items-center space-x-3 mt-2">
            <button
                id="editButton-{{ post.postId }}"
                class="p-2 w-10 h-10 bg-green-500 hover:bg-green-700 text-white rounded-full shadow transition-all cursor-pointer flex items-center justify-center"
                onclick="editPost('{{ post.postId }}')"
                title="Edit post"
            >
                <i class="fa fa-edit"></i>
            </button>
            
            <form
                hx-post="{{ path('app_forum_delete', {'id': post.postId}) }}"
                hx-target="#post-{{ post.postId }}"
                hx-swap="outerHTML"
                onsubmit="return confirm('Are you sure you want to delete this post?');"
                class="inline-block"
            >
                <button
                    type="submit"
                    class="p-2 w-10 h-10 bg-red-500 hover:bg-red-700 text-white rounded-full shadow transition-all cursor-pointer flex items-center justify-center"
                    title="Delete post"
                >
                    <i class="fa fa-trash"></i>
                </button>
            </form>
            
            <twig:LikeButton
                postId="{{ post.postId }}"
                isLiked="{{ post.isLiked }}"
                likesCount="{{ post.likesCount }}"
            />
        </div>
    </div>

    <div class="mt-6">
        <form
            hx-post="{{ path('app_forum_comment') }}"
            hx-target="#commentsContainer-{{ post.postId }}"
            hx-swap="beforeend"
            hx-on::after-request="if(event.detail.successful) this.reset()"
            onsubmit="return validateCommentForm(this);"
        >
            <input type="hidden" name="postId" value="{{ post.postId }}" />
            <textarea
                name="commentText"
                class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                placeholder="Write a comment..."
            ></textarea>
            <p id="commentErrorMessage-{{ post.postId }}" class="text-red-500 text-sm mt-2"></p>
            <div class="flex justify-end">
                <button
                    type="submit"
                    class="mt-2 p-2 w-10 h-10 bg-blue-600 text-white rounded-full shadow hover:bg-blue-700 transition-all cursor-pointer flex items-center justify-center"
                    title="Add comment"
                >
                    <i class="fa fa-comment"></i>
                </button>
            </div>
        </form>
    </div>

    <div id="commentsContainer-{{ post.postId }}" class="mt-4">
        {% if post.comments is defined %}
            {% for comment in post.comments %}
                {% include 'components/Comment.html.twig' with {'comment': comment} %}
            {% endfor %}
        {% endif %}
    </div>
</div>