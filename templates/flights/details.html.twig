{% extends 'base.html.twig' %} {% block title %}Flight Details{% endblock %} {% block body %}
<div class="container mx-auto px-4 mt-8 space-y-6">
	<h1 class="text-5xl font-bold mb-6">{{ voyage.titre }}</h1>
	<div class="grid gap-6 md:grid-cols-2">
		<div class="space-y-4">
			<p class="text-base text-gray-700">Destination: <span class="font-medium">{{ voyage.destination }}</span></p>
			<p class="text-base text-gray-700">Description: <span class="font-medium">{{ voyage.description }}</span></p>
			<p class="text-base text-gray-700">Price: <span class="font-medium">{{ voyage.prix }} â‚¬</span></p>
		</div>
		<div class="space-y-4">
			<p class="text-base text-gray-700">
				Available Places: <span class="font-medium">{{ voyage.placesDisponibles }}</span>
			</p>
			<p class="text-base text-gray-700">
				Departure Date: <span class="font-medium">{{ voyage.dateDepart|date('d-m-Y') }}</span>
			</p>
			<p class="text-base text-gray-700">
				Return Date: <span class="font-medium">{{ voyage.dateRetour|date('d-m-Y') }}</span>
			</p>
		</div>
	</div>
	<div class="bg-white rounded-lg shadow-md p-6">
		<form method="post" action="{{ path('app_reserve_flight', {id: voyage.offresVoyageId}) }}" class="space-y-4">
			<div>
				<label for="nbrPlace" class="block text-base font-medium text-gray-700 mb-2">Number of Seats:</label>
				<input
					type="number"
					id="nbrPlace"
					name="nbrPlace"
					class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
				/>
			</div>
			<div>
				<label for="promoCode" class="block text-base font-medium text-gray-700 mb-2">Promo Code:</label>
				<input
					type="text"
					id="promoCode"
					name="promoCode"
					class="block w-full rounded-lg border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
				/>
			</div>
			<div id="error-messages" class="text-red-500"></div>
			{% for message in app.flashes('error') %}
			<div class="text-red-500">{{ message }}</div>
			{% endfor %} {% for message in app.flashes('success') %}
			<div class="text-green-500">{{ message }}</div>
			{% endfor %} {% for message in app.flashes('info') %}
			<div class="text-blue-500">{{ message }}</div>
			{% endfor %}
			<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg shadow">
				Reserve Now
			</button>
		</form>
	</div>
	<div class="mt-4">
		<a
			href="{{ path('app_flights') }}"
			class="bg-gray-100 hover:bg-gray-200 text-gray-800 font-medium py-2 px-4 rounded-lg"
		>
			Back to Flights
		</a>
	</div>
</div>
<script>
	const FlightDetailsApp = (() => {
		const CONFIG = {
			MIN_SEATS: 1,
		};

		const elements = {
			nbrPlace: document.getElementById("nbrPlace"),
			errorMessages: document.getElementById("error-messages"),
			form: document.querySelector("form"),
		};

		const Validator = {
			validateForm() {
				const errors = [];

				if (!elements.nbrPlace.value || parseInt(elements.nbrPlace.value) < CONFIG.MIN_SEATS) {
					errors.push(`Number of seats must be at least ${CONFIG.MIN_SEATS}.`);
				}

				elements.errorMessages.innerHTML = "";
				if (errors.length > 0) {
					elements.errorMessages.innerHTML = errors.map((error) => `<p class='text-red-500'>${error}</p>`).join("");
					return false;
				}

				return true;
			},
		};

		const FormHandler = {
			submitForm(event) {
				if (!Validator.validateForm()) {
					event.preventDefault();
				}
			},
		};

		const init = () => {
			elements.form.addEventListener("submit", FormHandler.submitForm);
		};

		if (document.readyState === "loading") {
			document.addEventListener("DOMContentLoaded", init);
		} else {
			init();
		}

		return {
			validateForm: Validator.validateForm,
		};
	})();
</script>
{% endblock %}
